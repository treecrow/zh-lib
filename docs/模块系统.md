# 模块系统

- [JavaScript 模块的前世今生](https://yanhaijing.com/javascript/2015/03/28/js-module/)

## 模块系统列表

- node 中的 commonjs
- 浏览器中的 AMD
- 同时兼容不同模块系统的 UMD

## 不同环境中的模块化方案

| @          | 浏览器（script,ADM,CDM） | 预编译工具（webpack、rollup、fis） | Node     |
| ---------- | ------------------------ | ---------------------------------- | -------- |
| 引用文件   | index.aio.js             | index.esm.js                       | index.js |
| 模块化方案 | UMD                      | ES Moudle                          | commonjs |
| 自身依赖   | 打包                     | 打包                               | 打包     |
| 第三方依赖 | 打包                     | 不打包                             | 不打包   |

## 模块的前世今生

| @                                             | 实现                    | 定义                                          | 引用                                      |
| --------------------------------------------- | ----------------------- | --------------------------------------------- | ----------------------------------------- |
| CMD(Common Module Definition)                 | seajs                   | `define(function(require, exports, module){}` | `require('event')`                        |
| AMD(Asynchronous Module Definition)           | requireJS，modJS、lodJS | `define(id?, dependencies?, factory)`         | `require('event')`                        |
| [CommonJS](CommonJS规范)                      | -                       | `module.exports`                              | `require('')`                             |
| UMD(Universal Module Definition)              | 语法糖                  | -                                             | -                                         |
| [ES6](http://es6.ruanyifeng.com/#docs/module) | -                       | `export` `export default`                     | `import {} from xxx` `import xx from xxx` |

```js
(function (root, factory) {
    var Data = factory(root);
    if ( typeof define === 'function' && define.amd) {
        // AMD
        define('data', function() {
            return Data;
        });
    } else if ( typeof exports === 'object') {
        // Node.js
        module.exports = Data;
    } else {
        // Browser globals
        var _Data = root.Data;

        Data.noConflict = function () {
            if (root.Data === Data) {
                root.Data = _Data;
            }

            return Data;
        };
        root.Data = Data;
    }
}(this, function (root) {
	var Data = ...
	//自己的代码
	return Data;
}));
```
